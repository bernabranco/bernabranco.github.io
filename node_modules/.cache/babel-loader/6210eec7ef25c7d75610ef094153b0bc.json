{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { React, useEffect } from 'react';\nimport * as THREE from 'three';\nexport default function Threejs() {\n  _s();\n\n  //create scene and camera\n  const scene = new THREE.Scene();\n  const camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 0.1, 1000); //create render, canvas and add canvas to dom\n\n  const renderer = new THREE.WebGLRenderer();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  function render() {\n    const material = new THREE.ShaderMaterial({\n      uniforms: {\n        time: {\n          value: 1.0\n        },\n        resolution: {\n          value: new THREE.Vector2(window.innerWidth, window.innerHeight)\n        },\n        mousex: {\n          value: 0\n        },\n        mousey: {\n          value: 0\n        }\n      },\n      vertexShader: document.getElementById('vertexShader').textContent,\n      fragmentShader: document.getElementById('fragmentShader').textContent\n    });\n    const geometry = new THREE.PlaneGeometry(5, 10, 1);\n    const mesh = new THREE.Mesh(geometry, material);\n    scene.add(mesh);\n    renderer.render(scene, camera); //define shader time\n\n    material.uniforms.time.value += 0.05;\n    scene.remove(mesh);\n    geometry.dispose();\n    material.dispose();\n  }\n\n  camera.position.z = 1;\n  useEffect(() => {\n    //mouse animate shader\n    window.addEventListener(\"mousemove\", shaderAnimate);\n\n    function shaderAnimate(e) {\n      const canvas = document.querySelector(\"canvas\");\n\n      if (e.pageX >= canvas.getBoundingClientRect().left) {\n        material.uniforms.mousex.value = e.pageX * 0.001;\n        material.uniforms.mousey.value = e.pageY * 0.001;\n      }\n    } // //mouse rotates shader\n    // window.addEventListener(\"mousemove\", mouseAnimate);\n    //map values method\n\n\n    function map_range(value, low1, high1, low2, high2) {\n      return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n    } // function mouseAnimate(e){\n    // \tvar mouse = new THREE.Vector2(e.pageX, e.pageY);\n    // \tvar xoffset = map_range(mouse.x,0,window.innerWidth, -2*3.14, 2*3.14);\n    // \tvar yoffset = map_range(mouse.y,0,window.innerHeight, -2*3.14, 2*3.14);\n    // \tmesh.rotation.x += yoffset*0.02;\n    // \tmesh.rotation.y += xoffset*0.02;\n    // }\n\n\n    function animate() {\n      requestAnimationFrame(animate);\n    }\n\n    ;\n    window.addEventListener('resize', () => handleResize());\n\n    function handleResize() {\n      console.log('entrou'); // Update camera\n\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix(); // Update renderer\n\n      renderer.setSize(window.innerWidth, window.innerHeight); //use 1 to avoid resize lag on shader\n      //renderer.setPixelRatio(Math.min(window.devicePixelRatio),1.0);\n    }\n\n    animate();\n    return () => {\n      cancelAnimationFrame(animate);\n      window.removeEventListener(\"mousemove\", shaderAnimate);\n      window.removeEventListener('resize', handleResize);\n      material.dispose();\n      geometry.dispose();\n      mesh.geometry.dispose();\n      mesh.material.dispose();\n      scene.remove(mesh);\n      scene.dispose();\n      renderer.dispose();\n      document.body.removeChild(renderer.domElement);\n    };\n  });\n  return null;\n}\n\n_s(Threejs, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Threejs;\n\nvar _c;\n\n$RefreshReg$(_c, \"Threejs\");","map":{"version":3,"sources":["/Users/bernardoagbranco/react-learn/portfolio_site/site/src/components/Threejs.js"],"names":["React","useEffect","THREE","Threejs","scene","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","renderer","WebGLRenderer","setSize","document","body","appendChild","domElement","render","material","ShaderMaterial","uniforms","time","value","resolution","Vector2","mousex","mousey","vertexShader","getElementById","textContent","fragmentShader","geometry","PlaneGeometry","mesh","Mesh","add","remove","dispose","position","z","addEventListener","shaderAnimate","e","canvas","querySelector","pageX","getBoundingClientRect","left","pageY","map_range","low1","high1","low2","high2","animate","requestAnimationFrame","handleResize","console","log","aspect","updateProjectionMatrix","cancelAnimationFrame","removeEventListener","removeChild"],"mappings":"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","sourcesContent":["\nimport {React, useEffect} from 'react'\nimport * as THREE from 'three';\n\nexport default function Threejs(){\n\n   \t   //create scene and camera\n\t   const scene = new THREE.Scene();\n\t   const camera = new THREE.PerspectiveCamera( 100, window.innerWidth / window.innerHeight, 0.1, 1000 );\n\t   \n\t   //create render, canvas and add canvas to dom\n\t   const renderer = new THREE.WebGLRenderer();\n\t   renderer.setSize( window.innerWidth, window.innerHeight );\n\t   document.body.appendChild( renderer.domElement );\n \n\t   function render(){\n\t\tconst material = new THREE.ShaderMaterial( \n\t\t\t{\t   \n\t\t\tuniforms: {\n\t\t\t  time: { value: 1.0 },\n\t\t\t  resolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) },\n\t\t\t  mousex: {value: 0},\n\t\t\t mousey: {value:0}\n\t\t\t},\n\t\t\tvertexShader: document.getElementById( 'vertexShader' ).textContent,\n\t\t\tfragmentShader: document.getElementById( 'fragmentShader' ).textContent\n\t\t\t} \n\t\t);\n\t\t\n\t\t\n\t\tconst geometry = new THREE.PlaneGeometry(5,10,1);\n\t\tconst mesh = new THREE.Mesh( geometry, material );\n\t\tscene.add(mesh);\n\n\t\trenderer.render( scene, camera );\n\n\t\t//define shader time\n\t\tmaterial.uniforms.time.value += 0.05;\n\n\t\tscene.remove(mesh);\n\t\tgeometry.dispose();\n\t\tmaterial.dispose();\n\t   }\n\n\n\n\t   camera.position.z = 1;\n\nuseEffect(() => {\n\t\t\n\t\t\t//mouse animate shader\n\t\t\twindow.addEventListener(\"mousemove\", shaderAnimate);\n\n\t\t\tfunction shaderAnimate(e){\n\t\t\t\tconst canvas = document.querySelector(\"canvas\");\n\t\t\t\tif (e.pageX >= canvas.getBoundingClientRect().left){\n\t\t\t\t\tmaterial.uniforms.mousex.value = e.pageX*0.001;\n\t\t\t\t\tmaterial.uniforms.mousey.value = e.pageY*0.001;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// //mouse rotates shader\n\t\t\t// window.addEventListener(\"mousemove\", mouseAnimate);\n\n\t\t\t//map values method\n\t\t\tfunction map_range(value, low1, high1, low2, high2) {\n\t\t\t\treturn low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n\t\t\t}\n\n\t\t\t// function mouseAnimate(e){\n\t\t\t// \tvar mouse = new THREE.Vector2(e.pageX, e.pageY);\n\t\t\t// \tvar xoffset = map_range(mouse.x,0,window.innerWidth, -2*3.14, 2*3.14);\n\t\t\t// \tvar yoffset = map_range(mouse.y,0,window.innerHeight, -2*3.14, 2*3.14);\n\t\t\t\t\n\t\t\t// \tmesh.rotation.x += yoffset*0.02;\n\t\t\t// \tmesh.rotation.y += xoffset*0.02;\n\t\t\t// }\n\t\t\t\n\t\tfunction animate() {\n\t\t\t\trequestAnimationFrame( animate );\n\t\t\t\t\n\t\t};\n\n\t  window.addEventListener('resize', ()=>handleResize());\n\n      function handleResize(){\n\t\t\t\n\t\t   console.log('entrou');\n\t\t\t// Update camera\n\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t\t// Update renderer\n\t\t\trenderer.setSize(window.innerWidth, window.innerHeight);\n\t\t\t//use 1 to avoid resize lag on shader\n\t\t\t//renderer.setPixelRatio(Math.min(window.devicePixelRatio),1.0);\n\t\t\t\n\t\t\t\n\t\t\t}\n\t\t\n\n\t\tanimate();\n\n        return () => {\n\t\t\tcancelAnimationFrame(animate);\n\t\t\twindow.removeEventListener(\"mousemove\", shaderAnimate);\n\t\t\twindow.removeEventListener('resize',handleResize);\n\t\t\tmaterial.dispose();\n\t\t\tgeometry.dispose();\t\n\t\t\tmesh.geometry.dispose();\n\t\t\tmesh.material.dispose();\n\t\t\tscene.remove( mesh );\n\t\t\tscene.dispose();\n\t\t\trenderer.dispose();\n\t\t\t\n\t\t\tdocument.body.removeChild(renderer.domElement);\t\n        }\n      });\n\nreturn(\n   null\n)\n\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}